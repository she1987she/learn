<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>éŠæˆ²æ¸¬è©¦é é¢ï½œMario ä¸»é¡ŒéŠæˆ²</title>
  <link rel="stylesheet" href="index.css">
  <style>
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
      margin: 2rem 0;
    }
    .test-card {
      background: #fff;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
    }
    .test-status {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    .test-pass { color: #22c55e; }
    .test-fail { color: #ef4444; }
    .test-pending { color: #f59e0b; }
  </style>
</head>
<body class="mario-bg">
  <header class="mario-header">
    <button class="mario-btn mario-back" onclick="location.href='index.html'">è¿”å›éŠæˆ²é¦–é </button>
    <h1 class="mario-title">ğŸ® éŠæˆ²æ¸¬è©¦é é¢</h1>
  </header>
  <main class="mario-main">
    <section class="mario-game-area">
      <p class="mario-desc">æª¢æŸ¥æ‰€æœ‰éŠæˆ²åŠŸèƒ½æ˜¯å¦æ­£å¸¸é‹ä½œ</p>
      <div class="test-grid" id="test-grid">
        <!-- æ¸¬è©¦é …ç›®å°‡ç”± JS å‹•æ…‹ç”Ÿæˆ -->
      </div>
    </section>
  </main>
  <script src="mario-common.js"></script>
  <script>
    const games = [
      { name: 'è¨ˆç®—æ©Ÿè€ƒé¡Œæ¸¬é©—', url: 'calculator-quiz.html', features: ['éš¨æ©Ÿé¡Œç›®', 'é›£åº¦é¸æ“‡', 'éŸ³æ•ˆ', 'æ’è¡Œæ¦œ'] },
      { name: 'äº•å­—éŠæˆ²', url: 'tic-tac-toe.html', features: ['AIå°æˆ°', 'äººæ©Ÿäº’å‹•', 'å‹è² åˆ¤å®š'] },
      { name: 'è¨˜æ†¶ç¿»ç‰Œ', url: 'memory-flip-card.html', features: ['éš¨æ©Ÿåœ–ç¤º', 'è¨ˆæ™‚', 'é…å°é‚è¼¯'] },
      { name: 'é€£é€£çœ‹', url: 'matching-pairs.html', features: ['è·¯å¾‘æª¢æŸ¥', 'éš¨æ©Ÿä½ˆå±€', 'æ™‚é–“é™åˆ¶'] },
      { name: 'è¿·å®®éŠæˆ²', url: 'maze-game.html', features: ['éš¨æ©Ÿè¿·å®®', 'éµç›¤æ§åˆ¶', 'é€šé—œæª¢æ¸¬'] },
      { name: 'ä¿„ç¾…æ–¯æ–¹å¡Š', url: 'tetris.html', features: ['ä¸‹è½é‚è¼¯', 'æ¶ˆè¡Œæ©Ÿåˆ¶', 'åˆ†æ•¸ç³»çµ±'] },
      { name: 'æ•¸ç¨éŠæˆ²', url: 'sudoku.html', features: ['éš¨æ©Ÿé¡Œç›®', 'æ•¸å­—æª¢æŸ¥', 'å‹è² åˆ¤å®š'] },
      { name: 'æ‰¾ä¸åŒ', url: 'spot-the-difference.html', features: ['éš¨æ©Ÿå·®ç•°', 'é»æ“Šæª¢æ¸¬', 'é€²åº¦è¿½è¹¤'] },
      { name: 'å¡—é´‰æ¿', url: 'drawing-board.html', features: ['åƒç´ ç¹ªåœ–', 'é¡è‰²é¸æ“‡', 'æ¸…é™¤åŠŸèƒ½'] },
      { name: 'å››å­æ£‹', url: 'connect-four.html', features: ['é‡åŠ›æ•ˆæœ', 'é€£ç·šæª¢æ¸¬', 'AIé‚è¼¯'] },
      { name: 'é£›è¡Œæ£‹', url: 'ludo.html', features: ['éª°å­é‚è¼¯', 'æ£‹å­ç§»å‹•', 'å¤šäººéŠæˆ²'] },
      { name: 'è›‡æ£‹', url: 'snakes-and-ladders.html', features: ['è›‡æ¢¯é‚è¼¯', 'éš¨æ©Ÿäº‹ä»¶', 'å‹è² åˆ¤å®š'] },
      { name: 'æ‹¼åœ–éŠæˆ²', url: 'puzzle-game.html', features: ['æ»‘å‹•æ‹¼åœ–', 'éš¨æ©Ÿæ‰“äº‚', 'å®Œæˆæª¢æ¸¬'] }
    ];

    function createTestCards() {
      const grid = document.getElementById('test-grid');
      grid.innerHTML = games.map(game => `
        <div class="test-card">
          <h3>${game.name}</h3>
          <div class="test-status test-pending" id="status-${game.url}">â³ å¾…æ¸¬è©¦</div>
          <button class="mario-btn" onclick="testGame('${game.url}')">é–‹å§‹æ¸¬è©¦</button>
          <button class="mario-btn" onclick="openGame('${game.url}')" style="margin-left:0.5rem;">é–‹å•ŸéŠæˆ²</button>
          <div style="margin-top:1rem;">
            <h4>åŠŸèƒ½æª¢æŸ¥ï¼š</h4>
            <ul style="text-align:left;">
              ${game.features.map(feature => `<li>${feature}</li>`).join('')}
            </ul>
          </div>
        </div>
      `).join('');
    }

    function testGame(gameUrl) {
      const statusEl = document.getElementById(`status-${gameUrl}`);
      statusEl.textContent = 'ğŸ”„ æ¸¬è©¦ä¸­...';
      statusEl.className = 'test-status test-pending';
      
      // æ¨¡æ“¬æ¸¬è©¦éç¨‹
      setTimeout(() => {
        // ç°¡å–®çš„å­˜åœ¨æ€§æª¢æŸ¥
        fetch(gameUrl)
          .then(response => {
            if (response.ok) {
              statusEl.textContent = 'âœ… æ¸¬è©¦é€šé';
              statusEl.className = 'test-status test-pass';
            } else {
              statusEl.textContent = 'âŒ æ¸¬è©¦å¤±æ•—';
              statusEl.className = 'test-status test-fail';
            }
          })
          .catch(error => {
            statusEl.textContent = 'âŒ æª”æ¡ˆä¸å­˜åœ¨';
            statusEl.className = 'test-status test-fail';
          });
      }, 1000);
    }

    function openGame(gameUrl) {
      window.open(gameUrl, '_blank');
    }

    function testAllGames() {
      games.forEach(game => {
        setTimeout(() => testGame(game.url), Math.random() * 2000);
      });
    }

    // åˆå§‹åŒ–
    createTestCards();
    
    // è‡ªå‹•æ¸¬è©¦æŒ‰éˆ•
    document.querySelector('.mario-main').insertAdjacentHTML('beforeend', `
      <div style="text-align:center;margin:2rem 0;">
        <button class="mario-btn" onclick="testAllGames()" style="font-size:1.2em;padding:1rem 2rem;">
          ğŸš€ æ¸¬è©¦æ‰€æœ‰éŠæˆ²
        </button>
      </div>
    `);
  </script>
</body>
</html>
